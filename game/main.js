/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={4:t=>{var e;window,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.map=null,r.animatedTiles=[],r.rate=1,r.active=!1,r.activeLayer=[],r.followTimeScale=!0,t.sys.settings.isBooted||t.sys.events.once("boot",r.boot,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Phaser.Plugins.ScenePlugin),r(e,[{key:"boot",value:function(){var t=this.systems.events;t.on("postupdate",this.postUpdate,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)}},{key:"init",value:function(t){var e={map:t,animatedTiles:this.getAnimatedTiles(t),active:!0,rate:1,activeLayer:[]};t.layers.forEach((function(){return e.activeLayer.push(!0)})),this.animatedTiles.push(e),1===this.animatedTiles.length&&(this.active=!0)}},{key:"setRate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e)null===n?this.rate=t:this.animatedTiles[n].rate=t;else{var r=function(n){n.forEach((function(n){n.index===e&&(n.rate=t)}))};null===n?this.animatedTiles.forEach((function(t){r(t.animatedTiles)})):r(this.animatedTiles[n].animatedTiles)}}},{key:"resetRates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t?(this.rate=1,this.animatedTiles.forEach((function(t){t.rate=1,t.animatedTiles.forEach((function(t){t.rate=1}))}))):(this.animatedTiles[t].rate=1,this.animatedTiles[t].animatedTiles.forEach((function(t){t.rate=1})))}},{key:"resume",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null===n?this:this.animatedTiles[n];null===e?r.active=!0:(r.activeLayer[e]=!0,r.animatedTiles.forEach((function(n){t.updateLayer(n,n.tiles[e])})))}},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null===e?this:this.animatedTiles[e];null===t?n.active=!1:n.activeLayer[t]=!1}},{key:"postUpdate",value:function(t,e){var n=this;if(this.active){var r=e*this.rate*(this.followTimeScale?this.scene.time.timeScale:1);this.animatedTiles.forEach((function(t){if(t.active){var e=r*t.rate;t.animatedTiles.forEach((function(r){if(r.next-=e*r.rate,r.next<0){var i=r.currentFrame,o=r.frames[i].tileid,s=i+1;s>r.frames.length-1&&(s=0),r.next=r.frames[s].duration,r.currentFrame=s,r.tiles.forEach((function(e,i){t.activeLayer[i]&&n.updateLayer(r,e,o)}))}}))}}))}}},{key:"updateLayer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=[],i=t.frames[t.currentFrame].tileid;e.forEach((function(t){n>-1&&(null===t||t.index!==n)?r.push(t):t.index=i})),r.forEach((function(t){var n=e.indexOf(t);n>-1?e.splice(n,1):console.error("This shouldn't happen. Not at all. Blame Phaser Animated Tiles plugin. You'll be fine though.")}))}},{key:"shutdown",value:function(){}},{key:"destroy",value:function(){this.shutdown(),this.scene=void 0}},{key:"getAnimatedTiles",value:function(t){var e=this,n=[];return t.tilesets.forEach((function(e){var r=e.tileData;Object.keys(r).forEach((function(i){if(i=parseInt(i),r[i].hasOwnProperty("animation")){var o={index:i+e.firstgid,frames:[],currentFrame:0,tiles:[],rate:1};r[i].animation.forEach((function(t){var n={duration:t.duration,tileid:t.tileid+e.firstgid};o.frames.push(n)})),o.next=o.frames[0].duration,t.layers.forEach((function(t){if("StaticTilemapLayer"!==t.tilemapLayer.type){var n=[];t.data.forEach((function(t){t.forEach((function(t){t.index-e.firstgid===i&&n.push(t)}))})),o.tiles.push(n)}else o.tiles.push([])})),n.push(o)}}))})),t.layers.forEach((function(t,n){e.activeLayer[n]=!0})),n}},{key:"putTileAt",value:function(t,e,n,r){}},{key:"updateAnimatedTiles",value:function(){var t=null;null===t&&(t=[],this.animatedTiles.forEach((function(e){t.push(e)}))),t.forEach((function(t){t.animatedTiles.forEach((function(e){e.tiles.forEach((function(n,r){if("StaticTilemapLayer"!==t.map.layers[r].type)for(var i=0;i<10;i++)for(var o=0;o<10;o++){var s=t.map.layers[r].data[i][o];s.index==e.index&&(-1===n.indexOf(s)&&n.push(s),s.index=e.frames[e.currentFrame].tileid)}}))}))}))}}]),e}();i.register=function(t){t.register("AnimatedTiles",i,"animatedTiles")},t.exports=i}])},t.exports=e()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";const t=Phaser;var e=n.n(t);const r=n.p+"a57dcc5f40fcc813b64f36e0b865ea49.json",i=n.p+"assets/tileset.png?eeeea88152ffba36c81575b1075fb343",o=n.p+"assets/book-cover-screen-4x.png?6dfe00e16b0883d248564dca59c88b2b",s=n.p+"assets/pixel_font.png?d383c9e318910bc650650530d4a52b9a",a=n.p+"e2f47d234e6be9655f0c6c451c554b9e.json",c=(n.p,n.p+"assets/gamemusic.mp3?6ff6b3e81eee56408e9cb6b5cc5f631f"),u=n.p+"3ab671dc58cbea58783c0ae0672b6710.json";function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,l,y=h(d);function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),y.call(this,{key:"LOAD"})}return e=d,(n=[{key:"preload",value:function(){var t=this;this.load.audioSprite("game_audio",u,[c]),this.load.multiatlas("all_sprites",a,"assets"),this.load.image("bookCover",o),this.load.image("retro_font",s),this.load.tilemapTiledJSON("map",r),this.load.spritesheet("tileset",i,{frameWidth:8,frameHeight:8});var e=this.add.graphics({fillStyle:{color:16777215}}),n=this.game.renderer.width/3;this.load.on("progress",(function(r){e.fillRect(n,t.game.renderer.height/2-7,n*r,10)}))}},{key:"create",value:function(){this.sys.game.device.os.desktop?console.log("desktop"):console.log("mobile"),"?debug"===window.location.search?this.scene.start("PLAY"):this.scene.start("TITLE")}}])&&f(e.prototype,n),l&&f(e,l),d}(e().Scene);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(o,t);var e,n,r,i=_(o);function o(){return v(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"baseControls",value:function(){this.keys=this.keys||{},this.keys.x=this.input.keyboard.addKey("x"),this.keys.space=this.input.keyboard.addKey("space"),this.keys.enter=this.input.keyboard.addKey("enter")}},{key:"actionKeyDown",get:function(){return this.keys.x.isDown||this.keys.space.isDown||this.keys.enter.isDown}},{key:"toggleVolume",value:function(){this.vol_on.visible?(this.sound.pauseAll(),this.sound.mute=!0):(this.sound.mute=!1,this.sound.resumeAll()),this.vol_off.visible=!this.vol_off.visible,this.vol_on.visible=!this.vol_on.visible}},{key:"volumeControl",value:function(){this.vol_off=this.add.sprite(this.game.config.width,this.game.config.height,"all_sprites","speaker-1.png"),this.vol_off.visible=this.sound.mute,this.vol_off.setScrollFactor(0),this.vol_on=this.add.sprite(this.game.config.width,this.game.config.height,"all_sprites","speaker-0.png"),this.vol_on.visible=!this.sound.mute,this.vol_on.setScrollFactor(0);var t=this.add.rectangle(this.game.config.width-6.5,this.game.config.height-6.5,13,13,0,0);t.setScrollFactor(0),t.setInteractive(),t.on("pointerup",this.toggleVolume.bind(this)),this.input.keyboard.addKey("m").on("up",this.toggleVolume.bind(this))}}])&&g(e.prototype,n),r&&g(e,r),o}(e().Scene),S=n(4),j=n.n(S);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=F(t);if(e){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(o,t);var e,n,r,i=R(o);function o(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),console.log("constructing new player"),r=i.call(this,t,e,n,"player"),t.add.existing(B(r)),r.scene=t,r.dying=!1,r}return e=o,(n=[{key:"usePhysics",value:function(){this.scene.physics.add.existing(this),this.setCollideWorldBounds(!0),this.setBounce(0),this.body.setSize(this.width-8,this.height)}},{key:"resetBodySize",value:function(){this.body.setSize(this.width-8,this.height),this.setOffset(4,0)}},{key:"beginJump",value:function(){this.body.setVelocityY(-137.14285714285714),this.scene.soundFx.play("jump")}},{key:"jumping",value:function(){this.anims.play("player_jump",!0),this.body.setVelocityX(0)}},{key:"stand",value:function(){this.anims.play("player_stand",!0)}},{key:"stopMoving",value:function(){this.body.setVelocityX(0)}},{key:"running",value:function(){this.anims.play("player_run",!0)}},{key:"moveLeft",value:function(t){this.body.setVelocityX(-45),t&&this.running(),this.flipX=!0}},{key:"moveRight",value:function(t){this.body.setVelocityX(45),t&&this.running(),this.flipX=!1}},{key:"crouch",value:function(){this.anims.play("player_crouch",!0),this.body.setVelocityX(0),this.body.setSize(this.width-8,this.height-6),this.setOffset(4,6)}},{key:"death",value:function(){this.scene.music.play("player-death"),this.dying=!0,this.body.setVelocityX(0),this.anims.play("player_hurt",!0)}},{key:"update",value:function(t){if(!this.dying){this.resetBodySize();var e=this.body.onFloor();e||this.jumping(),t.LEFT.isDown||t.A.isDown?this.moveLeft(e):t.RIGHT.isDown||t.D.isDown?this.moveRight(e):(t.DOWN.isDown||t.S.isDown)&&e?this.crouch():e&&(this.stand(),this.stopMoving()),(t.UP.isDown||t.space.isDown||t.W.isDown)&&e&&this.beginJump()}}}])&&T(e.prototype,n),r&&T(e,r),o}(e().Physics.Arcade.Sprite);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=V(t);if(e){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(o,t);var e,n,r,i=z(o);function o(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=e.size/2;return(n=i.call(this,t,e.x,e.y+r,e.key)).scene=t,n.scene.add.existing(I(n)),n.scene.physics.add.existing(I(n)),n.body.allowGravity=!1,n.setOrigin(.5,.5),n.body.setSize(e.size-2,e.size-2),n.setOffset(0,0),n.setCollideWorldBounds(!0),n.body.onWorldBounds=!0,n.setupAnimations(e),n.body.setImmovable(!0),n.setActive(!1),n.setVisible(!1),n.body.world.once("worldbounds",(function(t){t.gameObject===this&&(this.setActive(!1),this.setVisible(!1))}),I(n)),n.scene.physics.add.collider(I(n),n.scene.player,n.scene.startOver,null,n.scene),e.autoStart&&n.beginFlying(),n}return e=o,(n=[{key:"setupAnimations",value:function(t){if("16x16/branch-sprite"===t.prefix)return this.animKey="branch_fly",void this.scene.anims.create({key:this.animKey,frames:[{key:"all_sprites",frame:"16x16/branch-sprite.png"}]});var e=t.key,n=t.prefix,r=t.startFrame,i=t.endFrame;this.animKey="".concat(e,"_flying"),this.scene.anims.create({key:this.animKey,frames:this.scene.anims.generateFrameNames("all_sprites",{prefix:n,start:r,end:i,zeroPad:1,suffix:".png"}),frameRate:10,repeat:-1})}},{key:"beginFlying",value:function(){this.setActive(!0),this.setVisible(!0),this.flying=!0,this.anims.play(this.animKey,!0),this.body.setVelocityX(-50)}},{key:"stopFlying",value:function(){this.body.setVelocityX(0)}},{key:"update",value:function(t,e){this.flying||this.scene.cameras.main.worldView.contains(this.x,this.y)&&this.beginFlying()}}])&&A(e.prototype,n),r&&A(e,r),o}(e().Physics.Arcade.Sprite);function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Y(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(o,t);var e,n,r,i=H(o);function o(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e.x+8,e.y+16,"boss")).scene=t,r.scene.add.existing(Y(r)),r.onBossDeath=n,r.scene.physics.add.existing(Y(r)),r.setOrigin(0,1),r.body.allowGravity=!1,r.body.setSize(14,16),r.setOffset(0,12),r.anims.play("boss_float",!0),r.setActive(!1),r.setVisible(!1),r.skullCount=0,r.bossDead=!1,r}return e=o,(n=[{key:"addSkulls",value:function(){this.skull=new M(this.scene,{x:this.x+2,y:this.y+4,key:"skull",prefix:"8x8/skull/",startFrame:0,endFrame:3,size:8,autoStart:!0}),this.skull.body.setVelocityX(-60),this.scene.soundFx.play("fireball")}},{key:"respawnSkull",value:function(){this.scene.soundFx.play("fireball"),this.skull.x=this.x,this.skull.setActive(!0),this.skull.setVisible(!0),this.skullCount++}},{key:"bossDying",value:function(){var t=this;this.bossDead=!0,this.anims.play("boss_death",!0),this.scene.time.addEvent({delay:1e3,callback:function(){t.onBossDeath(t.x,t.y),t.destroy()}})}},{key:"update",value:function(t,e){this.bossDead||(this.skull&&this.skullCount<3&&!this.scene.cameras.main.worldView.contains(this.skull.x,this.skull.y)&&this.respawnSkull(),this.skull&&this.skullCount>=3&&!this.scene.cameras.main.worldView.contains(this.skull.x,this.skull.y)?this.bossDying():this.active||this.scene.cameras.main.worldView.contains(this.x,this.y)&&this.scene.cameras.main.scrollX>=this.scene.bossSection&&(this.setActive(!0),this.setVisible(!0),this.scene.time.addEvent({delay:1e3,callback:this.addSkulls,callbackScope:this})))}}])&&W(e.prototype,n),r&&W(e,r),o}(e().Physics.Arcade.Sprite);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt(t);if(e){var i=nt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return et(this,n)}}function et(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rt=parseInt(location.hash.substring(1),10);!isNaN(rt)&&rt||(rt=1);var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(s,t);var n,r,i,o=tt(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,{key:"PLAY"})).spawnPointNum=rt,t}return n=s,(r=[{key:"init",value:function(t){console.log("play init data=",t),this.playerNum=t.playerNum||1}},{key:"preload",value:function(){this.load.scenePlugin("animatedTiles",j(),"animatedTiles","animatedTiles")}},{key:"setupWaterHand",value:function(){var t=this;this.spawnPoints.objects.filter((function(t){return"water_hand"===t.name})).forEach((function(e){var n=t.nonMovingKillers.create(e.x+8,e.y+8,"all_sprites","16x16/hand/0.png"),r=e.width-10;n.body.setSize(r,0),t.anims.play("water_hand_rise",n),n.on("animationupdate-water_hand_rise",(function(t,e){e.index>=3?n.body.setSize(r,15-(e.index-3)):n.body.setSize(r,0)}))}))}},{key:"setupCampfire",value:function(){var t=this;this.spawnPoints.objects.filter((function(t){return"camp_fire"===t.name})).forEach((function(e){var n=t.nonMovingKillers.create(e.x,e.y+4,"all_sprites","8x8/campfire-sprite-0.png");n.body.setSize(e.width-3,e.height-1),t.anims.play("campfire_burn",n)}))}},{key:"setupBeads",value:function(){var t=this;this.beadGroup=this.physics.add.staticGroup(),this.spawnPoints.objects.filter((function(t){return"bead"===t.name})).forEach((function(e,n){if(!(t.beads.indexOf(e.id)>=0)){var r=t.beadGroup.create(e.x,e.y+2,"all_sprites","8x8/beads/".concat(n,".png"));r.setOrigin(0,0),r.beadId=e.id,r.body.setSize(e.width,e.height)}})),this.physics.add.overlap(this.player,this.beadGroup,this.grabBead,null,this)}},{key:"setupWaterAndBones",value:function(){var t=this;this.map.getObjectLayer("PitObjects").objects.forEach((function(e){if("bones"===e.name){var n=t.nonMovingKillers.create(e.x+4,e.y+4,"all_sprites","8x8/blank.png");n.body.width=e.width,n.body.height=e.height}else if("water"===e.name){var r=t.nonMovingKillers.create(e.x+4,e.y+4,"all_sprites","8x8/water/0.png");r.body.width=e.width,r.body.height=e.height,r.body.setSize(e.width,e.height),t.anims.play("river_water",r)}}))}},{key:"setupPlayer",value:function(){var t=this;this.playerSpawnPoints=this.spawnPoints.objects.filter((function(t){return"player_spawn"===t.name}));var e=this.playerSpawnPoints.filter((function(e){return parseInt(e.type,10)===t.spawnPointNum}))[0];this.player=new L(this,e.x,e.y,this.playerNum),this.player.usePhysics(),this.physics.add.collider(this.groundLayer,this.player)}},{key:"setupMap",value:function(){this.map=this.make.tilemap({key:"map"});var t=this.map.addTilesetImage("tileset");this.bgLayer=this.map.createDynamicLayer("background",t),this.groundLayer=this.map.createDynamicLayer("platforms",t),this.fgLayer=this.map.createDynamicLayer("foreground",t),this.fgLayer.setDepth(1),this.sys.animatedTiles.init(this.map),this.groundLayer.setCollisionByExclusion([-1]),this.physics.world.bounds.width=this.bgLayer.width,this.physics.world.bounds.height=this.bgLayer.height,this.bossSection=this.bgLayer.width-this.game.config.width,this.blackRect=this.add.rectangle(0,0,this.game.config.width,16,0),this.blackRect.setOrigin(0,0),this.blackRect.setDepth(1),this.blackRect.setScrollFactor(0)}},{key:"setupBoss",value:function(){var t=this.spawnPoints.objects.filter((function(t){return"boss"===t.name}))[0];this.boss=new J(this,t,this.addLocket.bind(this)),this.physics.add.collider(this.groundLayer,this.boss)}},{key:"setupFlyingObjects",value:function(){var t=this;this.flyers=this.map.getObjectLayer("SpawnPoints").objects.filter((function(t){return"flying_object"===t.type})),this.flyingSprites=[],this.flyers.forEach((function(e){var n=new M(t,{x:e.x,y:e.y,key:e.name,prefix:e.properties.filter((function(t){return"prefix"===t.name}))[0].value,size:e.width,startFrame:e.properties.filter((function(t){return"startFrame"===t.name}))[0].value,endFrame:e.properties.filter((function(t){return"endFrame"===t.name}))[0].value});t.flyingSprites.push(n)}))}},{key:"addLocket",value:function(t,e){this.locket=this.physics.add.sprite(t,e-16,"all_sprites","locket.png"),this.locket.setCollideWorldBounds(!0),this.locket.body.setSize(12,12),this.locket.body.setImmovable(!0),this.physics.add.collider(this.locket,this.groundLayer),this.physics.add.overlap(this.locket,this.player,this.grabLocket,null,this)}},{key:"grabLocket",value:function(){var t=this;this.locket.destroy(),this.soundFx.play("collect-bead"),this.time.addEvent({delay:1500,callback:function(){return t.scene.start("END")}})}},{key:"setupText",value:function(){var t={image:"retro_font",width:8,height:8,chars:e().GameObjects.RetroFont.TEXT_SET3,charsPerRow:11,spacing:{x:0,y:0}};this.cache.bitmapFont.add("retro_font",e().GameObjects.RetroFont.Parse(this,t));var n=1===this.playerNum?"TEZ":"CORRYN";this.add.bitmapText(2,4,"retro_font",n).setScrollFactor(0).setDepth(2),this.beadText=this.add.bitmapText(64,4,"retro_font","BEADS ".concat(this.beads.length)),this.beadText.setDepth(2),this.beadText.setScrollFactor(0)}},{key:"grabBead",value:function(t,e){this.beads.push(e.beadId),e.destroy(),this.beadText.setText("BEADS ".concat(this.beads.length)),this.soundFx.play("collect-bead")}},{key:"create",value:function(){var t=this;this.beads=this.beads||[],this.keys=this.input.keyboard.addKeys("W,S,A,D,UP,LEFT,DOWN,RIGHT"),this.baseControls(),function(t){var e=t.anims.generateFrameNames("all_sprites",{prefix:"16x16/hand/",start:0,end:16,zeroPad:1,suffix:".png"});t.anims.create({key:"water_hand_rise",frames:e,frameRate:10,repeat:-1,repeatDelay:2e3}),t.anims.create({key:"campfire_burn",frames:t.anims.generateFrameNames("all_sprites",{start:0,end:3,zeroPad:1,prefix:"8x8/campfire-sprite-",suffix:".png"}),frameRate:10,repeat:-1}),t.anims.create({key:"river_water",frames:[{key:"all_sprites",frame:"8x8/water/0.png"},{key:"all_sprites",frame:"8x8/water/1.png"}],frameRate:1,repeat:-1}),t.anims.create({key:"boss_float",frames:t.anims.generateFrameNames("all_sprites",{prefix:"16x32/fireball/",start:0,end:6,zeroPad:1,suffix:".png"}),frameRate:15,repeat:-1}),t.anims.create({key:"boss_death",frames:t.anims.generateFrameNames("all_sprites",{prefix:"16x32/fireball/",start:7,end:15,zeroPad:1,suffix:".png"}),frameRate:10,repeat:0});var n=2===t.playerNum?8:0;t.anims.create({key:"player_stand",frames:[{key:"all_sprites",frame:"16x16/player/".concat(0+n,".png")}]}),t.anims.create({key:"player_jump",frames:[{key:"all_sprites",frame:"16x16/player/".concat(6+n,".png")}]}),t.anims.create({key:"player_crouch",frames:[{key:"all_sprites",frame:"16x16/player/".concat(5+n,".png")}]}),t.anims.create({key:"player_hurt",frames:[{key:"all_sprites",frame:"16x16/player/".concat(7+n,".png")},{key:"all_sprites",frame:"16x16/blank.png"}],frameRate:10,repeat:-1}),t.anims.create({key:"player_run",frames:t.anims.generateFrameNames("all_sprites",{prefix:"16x16/player/",start:1+n,end:4+n,zeroPad:1,suffix:".png"}),frameRate:10,repeat:0})}(this),this.setupMap(),this.spawnPoints=this.map.getObjectLayer("SpawnPoints"),this.nonMovingKillers=this.physics.add.staticGroup(),this.movingKillers=this.physics.add.group(),this.setupPlayer(),this.setupCampfire(),this.setupWaterAndBones(),this.setupWaterHand(),this.setupBoss(),this.setupFlyingObjects(),this.setupBeads(),this.setupText(),this.physics.add.overlap(this.player,this.nonMovingKillers,this.startOver,null,this),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.startFollow(this.player),this.music?this.time.addEvent({delay:750,callback:function(){return t.music.play("stage")}}):(this.music=this.sound.addAudioSprite("game_audio"),this.music.play("stage")),this.soundFx||(this.soundFx=this.sound.addAudioSprite("game_audio")),this.volumeControl()}},{key:"checkSpawnPosition",value:function(t){var e=this;this.playerSpawnPoints.forEach((function(n){var r=parseInt(n.type,10),i=n.x;t>i&&(e.spawnPointNum=r)}))}},{key:"update",value:function(t,e){this.player.update(this.keys),this.boss.update(t,e),this.flyingSprites.forEach((function(n){return n.update(t,e)})),this.checkSpawnPosition(this.player.x),this.cameras.main.scrollX>=this.bossSection&&(this.cameras.main.stopFollow(),"boss"===this.music.currentMarker.name||this.deathTimeout||this.music.play("boss"))}},{key:"startOver",value:function(t,e){var n=this;this.deathTimeout||(t instanceof M&&t.stopFlying(),e instanceof M&&e.stopFlying(),this.player.death(),this.deathTimeout=setTimeout((function(){n.scene.restart(),n.deathTimeout=null}),750))}}])&&q(n.prototype,r),i&&q(n,i),s}(x);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lt(t);if(e){var i=lt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(o,t);var e,n,r,i=ct(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{key:"MENU"})).playerNum=1,t}return e=o,(n=[{key:"create",value:function(){this.scale.setGameSize(128,120),this.scale.setZoom(4),this.keys=this.input.keyboard.createCursorKeys(),this.sprite1=this.add.sprite(0,0,"all_sprites","screens/player-select-01.png"),this.sprite2=this.add.sprite(0,0,"all_sprites","screens/player-select-02.png"),this.sprite2.visible=!1,this.sound.stopAll(),this.volumeControl(),this.baseControls()}},{key:"update",value:function(){this.keys.left.isDown?(this.sprite2.visible=!1,this.playerNum=1):this.keys.right.isDown?(this.sprite2.visible=!0,this.playerNum=2):this.actionKeyDown&&this.scene.start("PLAY",{playerNum:this.playerNum})}}])&&st(e.prototype,n),r&&st(e,r),o}(x);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var i=mt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(o,t);var e,n,r,i=dt(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,{key:"TITLE"})}return e=o,(n=[{key:"create",value:function(){this.add.sprite(0,0,"all_sprites","screens/title-screen.png"),this.baseControls()}},{key:"update",value:function(){this.actionKeyDown&&this.scene.start("MENU")}}])&&ht(e.prototype,n),r&&ht(e,r),o}(x);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var i=xt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(o,t);var e,n,r,i=kt(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,{key:"BOOK"})}return e=o,(n=[{key:"create",value:function(){this.scale.setGameSize(520,480),this.scale.setZoom(1),this.baseControls(),this.add.image(260,240,"bookCover")}},{key:"update",value:function(){this.actionKeyDown&&this.scene.start("CREDITS")}}])&&wt(e.prototype,n),r&&wt(e,r),o}(x);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dt(t);if(e){var i=Dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(o,t);var e,n,r,i=Et(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,{key:"CREDITS"})}return e=o,(n=[{key:"create",value:function(){this.scale.setGameSize(128,120),this.scale.setZoom(4),this.baseControls(),this.creditImage=this.add.sprite(0,0,"all_sprites","screens/credits.png"),this.resetPlayerAnimations();var t=this.game.scene.getScene("PLAY");t.spawnPointNum=1,t.beads=[]}},{key:"resetPlayerAnimations",value:function(){var t=this;["player_stand","player_jump","player_crouch","player_hurt","player_run"].forEach((function(e){return t.anims.remove(e)}))}},{key:"update",value:function(){this.actionKeyDown&&this.scene.start("MENU")}}])&&Pt(e.prototype,n),r&&Pt(e,r),o}(x);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zt(t);if(e){var i=zt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(o,t);var e,n,r,i=At(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,{key:"END"})}return e=o,(n=[{key:"create",value:function(){this.baseControls(),this.creditImage=this.add.sprite(0,0,"all_sprites","screens/congrats.png"),this.sound.stopAll(),this.music=this.sound.addAudioSprite("game_audio"),this.music.play("stage"),this.volumeControl()}},{key:"update",value:function(){this.actionKeyDown&&this.scene.start("BOOK")}}])&&Lt(e.prototype,n),r&&Lt(e,r),o}(x),It={parent:"phaser_game_container",type:e().AUTO,width:128,height:120,pixelArt:!0,zoom:4,scale:{mode:e().Scale.WIDTH_CONTROLS_HEIGHT,autoCenter:e().Scale.CENTER_HORIZONTALLY},physics:{default:"arcade",arcade:{gravity:{y:480},debug:"?debug"===window.location.search,tileBias:8}},scene:[b,vt,ft,it,St,Bt,Kt]};new(e().Game)(It)})()})();